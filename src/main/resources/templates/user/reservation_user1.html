<!doctype html>
<html layout:decorate="~{user/layout_user}">

<meta charset="utf-8">

<div layout:fragment="content">
        
        <link rel="stylesheet" type="text/css" href="/assets/css/reservation_user2.css">

        <section class="pager-sec bfr">
            <div class="container">
                <div class="pager-sec-details">
                    <h3>사용자 예약</h3>
                    <ul>
                    </ul>
                </div><!--pager-sec-details end-->
            </div>
        </section>

        <section class="page-main-content section-padding">
            <div class="container">
                <div class="agent-profile-sec" style="margin: 0 30%">
                    <div class="row" style="flex-direction: column;">
                        <div class="col-xl-8 col-lg-9 col-md-12 pl-0 pr-0">
                            <div class="agent-profile5">
                                <div class="agent-img5" style="margin-right: 60px;">
                                    <img src="https://via.placeholder.com/355x250" alt="">
                                </div><!--agent-img end-->
                                <div class="agent-info5">
                                    <h3>매물정보</h3>
                                    <p>보증금, 전월세, 중개비 등등</p>                                                                
                                </div><!--agent-info end-->
                            </div><!--agent-profile end-->
                        </div>
                        
                        <!-- 방문 날짜 -->

                        <form th:object="${visitorReservDTO}" th:action="@{/newzips/reservation_user1}" name="reservationForm" method="post" >
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                        <input type="hidden" th:field="*{visitDate}"/>
                        <input type="hidden" th:field="*{visitTime}"/>

                        <div class="col-xl-4 col-lg-3 col-md-12 pr-0" style="padding-left: 0;">
                           <div class="contact-agent" style="padding-left: 0;">
                           
                            <div style="margin-top: 70px"></div>
                                <h3 style="margin-bottom: 15px;">방문 가능 날짜 선택</h3>

                                    <div class="form-field">
                                        <input type="date" name="visitDate" id="Date" style="width: 40%">

                                    </div>
                                    <div style="margin-bottom: 20%;"></div>

                                <!--   시간선택      -->

								    <div class="middle_text">시간 선택</div>
								    <div style="font-size: 20px; width: 200%;">
								    	<input type="button" class="time-button" value="오전" disabled="disabled" style="border: none; padding: 0 0 0 8px; text-align: left;">
								        <input type="button" class="time-button" value="09:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="10:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="11:00" onclick="selectTime(this)" name="visittime"><br/><br/>
								        <input type="button" class="time-button" value="오후" disabled="disabled" style="border: none; padding: 0 0 0 8px; text-align: left;">
								        <input type="button" class="time-button" value="12:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="13:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="14:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="15:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="16:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="17:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="button" class="time-button" value="18:00" onclick="selectTime(this)" name="visittime" style="margin-right: 10px;">
								        <input type="hidden" th:field="*{visitTime}"/>
								    </div>
								    <div style="margin-bottom: 15%;"></div>

                                
                                 
                                 <div style="margin-top: 50px;"></div>
                                                                                 
                                    
                                    <div class="form-field5">
                                    <div style="margin-bottom: 70px;"></div>

                                        <button type="button" class="btn2" onclick="validateForm();" style="width: 50%; margin-left: 35%;">예약하기</button>
                                    </div><!--form-field end-->
                                    
                            </div><!--contact-agent end-->
                        </div>
                        </form>
                        
                    </div>
                </div><!--agent-profile-sec end-->
            </div>
        </section><!--page-main-content end-->
        


	 <script>
       
       function selectTime(button) {
           const buttons = document.getElementsByName("visittime");
           for (let i = 0; i < buttons.length; i++) {
               buttons[i].classList.remove("active");
           }
           button.classList.add("active");
       }

       function validateForm() {
           const date = document.getElementById("Date").value;
           const timeButtons = document.getElementsByName("visittime");
           let time = null;
           for (let i = 0; i < timeButtons.length; i++) {
               if (timeButtons[i].classList.contains("active")) {
                   time = timeButtons[i].value;
                   break;
               }
           }
           if (date === "") {
               alert("날짜를 선택해주세요.");
           } else if (time === null) {
               alert("시간을 선택해주세요.");
           } else {
               alert("예약되었습니다.\n날짜: " + date + ", 시간: " + time);
               
               const form = document.reservationForm;
               const vd = document.getElementById("visitDate");
               const vt = document.getElementById("visitTime");
               
               vd.value = date;
               vt.value = time;

               //form.action = "/newzips/reservation_user1";
               
//                alert(form.method);
//                alert(form.visitTime);
//                alert(form.visitDate);
//                alert(form.action);
               
               form.submit();
               
               /*
               const form = document.getElementById("reservationForm");
               const hiddenInput = document.createElement("input");
               hiddenInput.type = "hidden";
               hiddenInput.name = "visitTime";
               hiddenInput.value = time;
               form.appendChild(hiddenInput);
               form.action = "/newzips/reservation_user1";
               form.method="post";
               form.submit();
               */
               
           }       
       }
	</script>
	

</div><!--layout fragment end-->


</html>